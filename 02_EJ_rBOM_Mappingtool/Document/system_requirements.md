# システム要件仕様書

## プロジェクト概要
EJシステム（旧生産管理）とrBOMシステム（新生産管理）の発注残データマッピングツール

## 動作環境
- **OS**: Windows Server 2022
- **実行期間**: 短期間での運用
- **UI**: Streamlit
- **データ表示**: Ag-grid（無料版）

## データソース

### 1. EJシステム（Oracle Database）
- **接続先**: 172.17.107.102:1521/SN=EXPJ
- **ユーザー**: EXPJ2/EXPJ2
- **テーブル**: T_RLSD_PUCH_ODR
- **取得データ**: 発注残（まだ納品されていない発注データ）

### 2. rBOMシステム（API経由）
- **API URL**: http://pfw-api/orders/
- **認証**: READ_API_KEY="oG5^Ls%#20yq"
- **取得データ**: 発注明細データ

## 機能要件

### 1. データ取得機能
- EJシステムからデータベース直接参照で発注残取得
- rBOMシステムからAPI経由でデータ取得
- 抽出条件による絞り込み（納期範囲等）

### 2. マッピング機能
- **マッピングキー**: 品目コード + 発注数量
- **自動マッピング**: 両システムのデータを自動でマッピング
- **未マッピングデータ**: 片方のみのデータも表示（空欄表示）

### 3. データ管理機能
- **SQLite管理**: マッピング結果をSQLiteで管理
- **保存場所**: ./Database/フォルダ配下
- **固定値設定**: M連番=1、状態・手動M=空欄

### 4. 画面機能
- **一覧表示**: Ag-gridでマッピング結果表示
- **条件抽出**: 納期による絞り込み
- **CSV出力**: マッピング結果のCSVエクスポート
- **手動マッピング**: ドロワーメニュー（仮設定）

## 非機能要件
- **レスポンス**: 抽出・マッピング処理は数秒以内
- **セキュリティ**: データベース接続情報の安全な管理
- **保守性**: 短期運用のため最小限の実装

## 制約事項
- 短期運用システム
- 手動マッピング機能は仮設定
- Ag-gridは無料版のみ使用
- 抽出条件は納期のみ（将来拡張予定）